<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GI Interactive Case – DMSc</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#f0f8fa;
  --text:#1a2e4a;
  --button:#5b8fbe;
  --card:#ffffff;
  --feedback:#eef4f8;
}

body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:var(--bg);
  color:var(--text);
}

header{
  background:white;
  border-bottom:4px solid var(--button);
  padding:1rem;
  display:flex;
  gap:1rem;
  align-items:center;
}

header img{height:50px;}

main{
  max-width:1100px;
  margin:auto;
  padding:2rem;
}

.card{
  background:var(--card);
  padding:1.5rem;
  border-radius:8px;
  box-shadow:0 4px 10px rgba(0,0,0,.05);
  margin-bottom:2rem;
}

.hidden{display:none;}

.grid{
  display:grid;
  grid-template-columns:1fr 2fr;
  gap:1.5rem;
}

.avatar img{
  max-width:220px;
  width:100%;
  border-radius:8px;
}

button{
  width:100%;
  padding:.75rem;
  margin:.4rem 0;
  border:none;
  border-radius:6px;
  font-size:1rem;
  background:var(--button);
  color:white;
  cursor:pointer;
}

.utility{
  background:#dbe7ef;
  color:var(--text);
}

.feedback{
  background:var(--feedback);
  border-left:6px solid var(--button);
  padding:1rem;
  margin-top:1rem;
}

footer{
  display:flex;
  gap:.5rem;
  margin-top:1rem;
}

.certificate{
  border:4px solid var(--button);
  padding:2rem;
  text-align:center;
}
</style>
</head>

<body>

<header>
  <img src="dmsc-logo.png" alt="DMSc Logo">
  <h1>GI Interactive Case – Decision-Making Scenario</h1>
</header>

<main>

<!-- HOME -->
<div id="home" class="card">
  <h2>Objectives</h2>
  <ul>
    <li><strong>Analyze</strong> undifferentiated abdominal pain</li>
    <li><strong>Differentiate</strong> biliary, pancreatic, and colonic emergencies</li>
    <li><strong>Apply</strong> evidence-based diagnostic strategies</li>
    <li><strong>Evaluate</strong> complications and escalation of care</li>
  </ul>
  <button onclick="show('part1')">Begin Case</button>
</div>

<!-- PART 1 -->
<div id="part1" class="card hidden">
  <h2>Part 1 – Initial Presentation</h2>

  <div class="grid">
    <div class="avatar">
      <img src="avatar-patient.png" alt="Patient avatar">
    </div>
    <div>
      <h3>History</h3>
      <ul>
        <li>Pain started in upper abdomen, now more diffuse</li>
        <li>Intermittent chills, no documented fever</li>
        <li>PSHx: Cesarean section 12 years ago</li>
        <li>PMHx: Obesity, hyperlipidemia</li>
        <li>Meds: None</li>
        <li>Denies tobacco, alcohol, or drug use</li>
      </ul>

      <h3>Vitals</h3>
      <ul>
        <li>T 37.9°C</li>
        <li>HR 104</li>
        <li>BP 132/84</li>
        <li>RR 18</li>
        <li>SpO₂ 99% RA</li>
      </ul>

      <h3>Exam</h3>
      <ul>
        <li>Awake, alert, no distress</li>
        <li>Slight scleral icterus</li>
        <li>Mucus membranes dry</li>
        <li>Clear breath sounds</li>
        <li>RUQ and epigastric tenderness</li>
      </ul>
    </div>
  </div>

  <h3>Question 1: Initial diagnostic approach?</h3>

  <button onclick="feedback(
    'CT abdomen/pelvis without contrast',
    'CT A/P without contrast is useful for nephrolithiasis but is not ideal for suspected biliary pathology. CT can miss biliary stones and lacks gallbladder wall enhancement without contrast.',
    'part2'
  )">CT abdomen/pelvis without contrast</button>

  <button onclick="feedback(
    'RUQ ultrasound and labs',
    'Correct. RUQ ultrasound combined with laboratory evaluation is the first-line diagnostic approach for suspected biliary pathology.',
    'part2'
  )">RUQ ultrasound and laboratory evaluation</button>

  <button onclick="feedback(
    'Empiric antibiotics',
    'Treatment without diagnosis risks missing obstruction and delays definitive management.',
    'part2'
  )">Start antibiotics and admit for suspected cholecystitis</button>

  <button onclick="feedback(
    'Immediate MRCP',
    'MRCP is a confirmatory test for choledocholithiasis but is not the initial diagnostic step.',
    'part2'
  )">MRCP immediately</button>

  <div id="feedbackBox" class="feedback hidden"></div>

  <footer>
    <button class="utility" onclick="home()">Home</button>
  </footer>
</div>

<!-- PART 2 -->
<div id="part2" class="card hidden">
  <h2>Part 2 – Labs & Ultrasound</h2>

  <div class="grid">
    <div class="avatar">
      <img src="avatar-patient.png" alt="Ultrasound avatar">
    </div>
    <div>
      <h3>Labs</h3>
      <ul>
        <li>AST 220</li>
        <li>ALT 260</li>
        <li>Alk Phos 380</li>
        <li>Total bilirubin 4.1</li>
        <li>Lipase 68</li>
        <li>WBC 9.4</li>
      </ul>

      <h3>RUQ Ultrasound</h3>
      <ul>
        <li>Gallstones present</li>
        <li>Dilated CBD (12 mm)</li>
        <li>No wall thickening</li>
        <li>No pericholecystic fluid</li>
      </ul>
    </div>
  </div>

  <h3>Question 2: Most likely diagnosis?</h3>

  <button onclick="feedback(
    'Acute cholecystitis',
    'No sonographic evidence of cholecystitis is present.',
    'part4'
  )">Acute cholecystitis</button>

  <button onclick="feedback(
    'Acute pancreatitis',
    'Lipase is normal, making pancreatitis unlikely at this stage.',
    'part4'
  )">Acute pancreatitis</button>

  <button onclick="feedback(
    'Choledocholithiasis',
    'Correct. CBD dilation with cholestatic labs is highly concerning for choledocholithiasis.',
    'part4'
  )">Choledocholithiasis</button>

  <button onclick="feedback(
    'Cholangitis',
    'She lacks Charcot triad (fever, RUQ pain, jaundice).',
    'part4'
  )">Cholangitis</button>

  <div id="feedbackBox2" class="feedback hidden"></div>

  <footer>
    <button class="utility" onclick="show('part1')">Back</button>
    <button class="utility" onclick="home()">Home</button>
  </footer>
</div>

<!-- OUTCOMES + CERTIFICATE -->
<div id="outcomes" class="card hidden">
  <h2>Key Teaching Pearls</h2>
  <ul>
    <li>Choledocholithiasis requires MRCP → ERCP</li>
    <li>ERCP carries pancreatitis risk</li>
    <li>Cholecystectomy prevents recurrence</li>
    <li>Ogilvie syndrome is functional obstruction</li>
    <li>Cecal diameter &gt;12 cm = perforation risk</li>
    <li>Neostigmine requires ICU-level monitoring</li>
  </ul>

  <button onclick="show('certificate')">Generate Certificate</button>
</div>

<div id="certificate" class="card hidden">
  <div class="certificate">
    <h2>Certificate of Completion</h2>
    <p>GI Interactive Case – DMSc</p>
    <p>Date: <span id="date"></span></p>
  </div>
  <button onclick="window.print()">Download Certificate</button>
</div>

</main>

<script>
function show(id){
  document.querySelectorAll('.card').forEach(c=>c.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

function home(){show('home');}

function feedback(title,text,next){
  const box = document.getElementById('feedbackBox') || document.getElementById('feedbackBox2');
  box.innerHTML = `<strong>${title}</strong><p>${text}</p>
  <button onclick="show('${next}')">Continue</button>`;
  box.classList.remove('hidden');
}

document.getElementById("date").textContent =
  new Date().toLocaleDateString();
</script>

</body>
</html>
